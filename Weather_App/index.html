

<!DOCTYPE html> 


<html>

<head>
<title>Weather App</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="card">
    <div class="search-bar">
      <input type="text" placeholder="enter place name" spellcheck="false" style="color: rgb(33, 31, 31); ">
      <button> <img src="images/search.png"> </button>
    </div>

  <div class="weather-section">
    <div class="rain">
        <img src="images/rain.png" class="weather-icon">
        <h1 class="temp"> °C</h1>
        <h2 class="city"> City Name </h2>
    </div> 

  <div class="details">
    <div class="bottom">

      <div class="humidity">
        <img src="images/humidity.png">
        <div class="paragraph">
        <p class="humidPercentage">50%</p>
        <p class="humid">humidity</p>
        </div>
      </div>



    </div>    

    <div class="bottom">

     <div class="wind">
        <img src="images/wind.png">
        <div class="paragraph">
          <p class="speeded"> 50 Km/h</p>
          <p>Wind speed</p>
        </div>  
     </div>
  </div>
    </div>  

   </div>
</div>    


  <script>
    
    const ApiKey = "8cc40fedb617d613cb28e42acf95545d";
    const ApiUrl = " https://api.openweathermap.org/data/2.5/weather?units=metric&q=";
          
    const searchBox = document.querySelector('.search-bar input');
    const searchBtn = document.querySelector('.search-bar button');
    const weather_icon = document.querySelector('.weather-icon');
    const city_error = document.querySelector('.city');
    const humid_percentage = document.querySelector('.humidPercentage');
    const speed_check = document.querySelector('.speeded');
    const temp_deg = document.querySelector('.temp');

    async function promised(city_name){
    
    const response = await fetch(ApiUrl + city_name + `&appid=${ApiKey}`);

    if(response.status == 404){

        city_error.innerHTML = "Invalid place name";
        humid_percentage.innerHTML = "none";
        speed_check.innerHTML = "none";
        temp_deg.innerHTML = "none";

    }
    else{
    var data = await response.json();
    
    document.querySelector('.city').innerHTML = data.name;
    document.querySelector('.temp').innerHTML = Math.round(data.main.temp) + "°C";
    document.querySelector('.humidPercentage').innerHTML = data.main.humidity + "%";
    document.querySelector('.speeded').innerHTML = data.wind.speed + "Km/h";
    
   if(data.weather[0].main == "Clouds"){
    weather_icon.src = "images/clouds.png" ; 
   }
   else if(data.weather[0].main == "Clear"){
    weather_icon.src = "images/clear.png" ; 
   }
   else if(data.weather[0].main == "Rain"){
    weather_icon.src = "images/rain.png" ; 
   }
   else if(data.weather[0].main == "Drizzle"){
    weather_icon.src = "images/drizzle.png" ; 
   }
   else if(data.weather[0].main == "Mist"){
    weather_icon.src = "images/mist.png" ;
   }
   else if(data.weather[0].main == "Snow"){
    weather_icon.src = "images/snow.png" ; 
   }
    }
}


searchBtn.addEventListener('click', () => {
  const cityTrim = searchBox.value.trim();
   
  if(cityTrim != ""){
    promised(cityTrim);
}
else{
    alert("Please enter a city name");
}
});

searchBox.addEventListener('keydown' , (event) => {
   
  const cityTrim = searchBox.value.trim();

  if(event.key === 'Enter'){
   
    if(cityTrim != ""){
        
    promised(cityTrim);
   }
  
   else{
    alert("Please enter a city name");
}
  }
});






 </script>

</body>    

</html>

